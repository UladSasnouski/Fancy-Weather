(()=>{"use strict";function e(){var e=document.getElementById("refresh");e.classList.add("rotate");let n=`url(./background/${Math.floor(7*Math.random())+0}.jpg) no-repeat center center fixed`;setTimeout((function(){document.body.style.background=n,e.classList.remove("rotate")}),1e3)}const n=document.getElementById("time"),t=document.getElementById("date");var i,a,r,o=document.querySelector("input"),c=document.getElementById("temperature-now"),d=document.getElementById("temperature-first"),s=document.getElementById("temperature-second"),l=document.getElementById("temperature-third"),m=document.getElementById("latitude"),u=document.getElementById("longitude"),L=document.getElementById("feels-like"),M=document.getElementById("wind"),g=document.getElementById("humidity"),T=document.getElementById("weather-status"),H=document.getElementById("city"),y=document.getElementById("country"),h=document.getElementById("error-message"),I=document.getElementById("cloud-top"),p=document.getElementById("cloud-one"),E=document.getElementById("cloud-two"),b=document.getElementById("cloud-three"),k=document.getElementById("button-cels"),f=document.getElementById("button-far"),x=document.getElementById("button-lang"),v=document.getElementById("week-one"),w=document.getElementById("week-two"),B=document.getElementById("week-three"),$=document.getElementById("textLang"),S=document.getElementById("textSearch"),F=document.getElementById("textFeels"),C=document.getElementById("textWind"),N=document.getElementById("textWindParam"),U=document.getElementById("textHumidity"),D=document.getElementById("textLatitude"),R=document.getElementById("textLongitude"),W=document.getElementById("yourSearch"),j=document.getElementById("getNewCity");function P(){let e=new Date,t=e.getUTCHours(),i=e.getUTCMinutes(),r=e.getUTCSeconds();var o=+t+a/3600;o<0&&(o=24+o),n.innerHTML=`${o}<span> : </span>${_(i)}<span> : </span>${_(r)}`}function _(e){return(parseInt(e,10)<10?"0":"")+e}function q(){let e=new Date,n=e.getDate(),i=e.getMonth(),a=e.getDay();if("EN"===localStorage.getItem("language")||"EN"===r){switch($.innerHTML="EN",S.innerHTML="SEARCH",F.innerHTML="FEELS LIKE: ",C.innerHTML="WIND: ",N.innerHTML="m/s",U.innerHTML="HUMIDITY: ",D.innerHTML="Latitude:",R.innerHTML="Longitude:",a){case 0:a="Sun",v.innerHTML="Monday",w.innerHTML="Tuesday",B.innerHTML="Wednesday";break;case 1:a="Mon",v.innerHTML="Tuesday",w.innerHTML="Wednesday",B.innerHTML="Thursday";break;case 2:a="Tues",v.innerHTML="Wednesday",w.innerHTML="Thursday",B.innerHTML="Friday";break;case 3:a="Wed",v.innerHTML="Thursday",w.innerHTML="Friday",B.innerHTML="Saturday";break;case 4:a="Thur",v.innerHTML="Friday",w.innerHTML="Saturday",B.innerHTML="Sunday";break;case 5:a="Fri",v.innerHTML="Saturday",w.innerHTML="Sunday",B.innerHTML="Monday";break;case 6:a="Sat",v.innerHTML="Sunday",w.innerHTML="Monday",B.innerHTML="Tuesday"}switch(i){case 0:i="January";break;case 1:i="February";break;case 2:i="March";break;case 3:i="April";break;case 4:i="May";break;case 5:i="June";break;case 6:i="July";break;case 7:i="August";break;case 8:i="September";break;case 9:i="October";break;case 10:i="November";break;case 11:i="December"}}else if("RU"===localStorage.getItem("language")||"RU"===r){switch($.innerHTML="РУ",S.innerHTML="ПОИСК",F.innerHTML="ОЩУЩАЕТСЯ: ",C.innerHTML="ВЕТЕР: ",N.innerHTML="м/с",U.innerHTML="ВЛАЖНОСТЬ: ",D.innerHTML="Широта:",R.innerHTML="Долгота:",a){case 0:a="Вс",v.innerHTML="Понедельник",w.innerHTML="Вторник",B.innerHTML="Среда";break;case 1:a="Пн",v.innerHTML="Вторник",w.innerHTML="Среда",B.innerHTML="Четверг";break;case 2:a="Вт",v.innerHTML="Среда",w.innerHTML="Четверг",B.innerHTML="Пятница";break;case 3:a="Ср",v.innerHTML="Четверг",w.innerHTML="Пятница",B.innerHTML="Суббота";break;case 4:a="Чт",v.innerHTML="Пятница",w.innerHTML="Суббота",B.innerHTML="Воскресенье";break;case 5:a="Пт",v.innerHTML="Суббота",w.innerHTML="Воскресенье",B.innerHTML="Понедельник";break;case 6:a="Сб",v.innerHTML="Воскресенье",w.innerHTML="Понедельник",B.innerHTML="Вторник"}switch(i){case 0:i="Январь";break;case 1:i="Февраль";break;case 2:i="Март";break;case 3:i="Апрель";break;case 4:i="Май";break;case 5:i="Июнь";break;case 6:i="Июль";break;case 7:i="Август";break;case 8:i="Сентябрь";break;case 9:i="Октябрь";break;case 10:i="Ноябрь";break;case 11:i="Декабрь"}}t.innerHTML=`${a}<span> </span>${n}<span> </span>${i}`}function z(e,n){var t={lat:e,lng:n},i=new google.maps.Map(document.getElementById("geo-maps"),{center:t,zoom:10,disableDefaultUI:!0});new google.maps.Marker({position:t,map:i})}function A(){let e=W.value;O(e),console.log(e),e="Search city or ZIP"}function J(){fetch("https://ipinfo.io/json?token=603648da1a2c04").then((e=>e.json())).then((e=>{O(e.city)}))}function O(n){if(i=n,"farengeit"===localStorage.getItem("temp-status")){f.classList.add("active"),k.classList.remove("active");let t=r;t.toLowerCase(),fetch(`https://api.openweathermap.org/data/2.5/forecast?q=${n}&units=metric&lang=${t}&appid=ff0534b467d145be778cd1ec2930ac63`).then((function(e){return e.ok?e.json():(console.log("Что-то пошло не так :("),Promise.reject(e))})).then((n=>{console.log(n),c.innerHTML=Math.round(n.list[0].main.temp),T.innerHTML=`${n.list[0].weather[0].description}`,L.innerHTML=`${Math.round(n.list[0].main.feels_like)}`,M.innerHTML=`${Math.round(n.list[0].wind.speed)}`,g.innerHTML=`${Math.round(n.list[0].main.humidity)} %`,I.innerHTML=`<img src="icons/animated/${n.list[0].weather[0].icon}.svg" alt="cloud">`,d.innerHTML=Math.round(n.list[6].main.temp),p.innerHTML=`<img src="icons/animated/${n.list[6].weather[0].icon}.svg" alt="cloud">`,s.innerHTML=Math.round(n.list[14].main.temp),E.innerHTML=`<img src="icons/animated/${n.list[14].weather[0].icon}.svg" alt="cloud">`,l.innerHTML=Math.round(n.list[22].main.temp),b.innerHTML=`<img src="icons/animated/${n.list[22].weather[0].icon}.svg" alt="cloud">`,m.innerHTML=`${n.city.coord.lat.toFixed(2)}`,u.innerHTML=`${n.city.coord.lon.toFixed(2)}`;let i=new Intl.DisplayNames([`${t}`],{type:"region"});H.innerHTML=`${n.city.name}`,y.innerHTML=i.of(`${n.city.country}`),c.innerHTML=(1.8*+c.textContent+32).toFixed(0),d.innerHTML=(1.8*+d.textContent+32).toFixed(0),s.innerHTML=(1.8*+s.textContent+32).toFixed(0),l.innerHTML=(1.8*+l.textContent+32).toFixed(0),L.innerHTML=(1.8*+L.textContent+32).toFixed(0),z(n.city.coord.lat,n.city.coord.lon),a=n.city.timezone,P(),console.log(n.city.timezone),e(),document.body.classList.add("loaded_hiding"),window.setTimeout((function(){document.body.classList.add("loaded"),document.body.classList.remove("loaded_hiding")}),1e3)})).catch((e=>{h.classList.add("open-error");let n=document.getElementById("textError");"EN"===localStorage.getItem("language")||"EN"===r?n.innerHTML="Ops... Invalid request :(":"RU"!==localStorage.getItem("language")&&"RU"!==r||(n.innerHTML="Ой... Что-то пошло не так :(")}))}else{k.classList.add("active"),f.classList.remove("active");let t=r;t.toLowerCase(),fetch(`https://api.openweathermap.org/data/2.5/forecast?q=${n}&units=metric&lang=${t}&appid=ff0534b467d145be778cd1ec2930ac63`).then((function(e){return e.ok?e.json():(console.log("Что-то пошло не так :("),Promise.reject(e))})).then((n=>{console.log(n),c.innerHTML=Math.round(n.list[0].main.temp),T.innerHTML=`${n.list[0].weather[0].description}`,L.innerHTML=`${Math.round(n.list[0].main.feels_like)}`,M.innerHTML=`${Math.round(n.list[0].wind.speed)}`,g.innerHTML=`${Math.round(n.list[0].main.humidity)} %`,I.innerHTML=`<img src="icons/animated/${n.list[0].weather[0].icon}.svg" alt="cloud">`,d.innerHTML=Math.round(n.list[6].main.temp),p.innerHTML=`<img src="icons/animated/${n.list[6].weather[0].icon}.svg" alt="cloud">`,s.innerHTML=Math.round(n.list[14].main.temp),E.innerHTML=`<img src="icons/animated/${n.list[14].weather[0].icon}.svg" alt="cloud">`,l.innerHTML=Math.round(n.list[22].main.temp),b.innerHTML=`<img src="icons/animated/${n.list[22].weather[0].icon}.svg" alt="cloud">`;let i=new Intl.DisplayNames([`${t}`],{type:"region"});H.innerHTML=`${n.city.name}`,y.innerHTML=i.of(`${n.city.country}`),m.innerHTML=`${n.city.coord.lat.toFixed(2)}`,u.innerHTML=`${n.city.coord.lon.toFixed(2)}`,z(n.city.coord.lat,n.city.coord.lon),a=n.city.timezone,P(),console.log(n.city.timezone),e(),document.body.classList.add("loaded_hiding"),window.setTimeout((function(){document.body.classList.add("loaded"),document.body.classList.remove("loaded_hiding")}),5e3)})).catch((e=>{h.classList.add("open-error");let n=document.getElementById("textError");"EN"===localStorage.getItem("language")||"EN"===r?n.innerHTML="Ops... Invalid request :(":"RU"!==localStorage.getItem("language")&&"RU"!==r||(n.innerHTML="Ой... Что-то пошло не так :(")}))}}refresh.onclick=function(){e()},o.onclick=function(){("Search city or ZIP"===o.value||"Искать город или почтовый индекс"===o.value)&&(o.value="")},x.onclick=function(n){"EN"===r?(r="RU",localStorage.setItem("language",r),$.innerHTML="РУ",F.innerHTML="ОЩУЩАЕТСЯ: ",C.innerHTML="ВЕТЕР: ",N.innerHTML="м/с",U.innerHTML="ВЛАЖНОСТЬ: ",o.value,S.innerHTML="ПОИСК",D.innerHTML="Широта:",R.innerHTML="Долгота:",O(i),q()):"RU"===r&&(r="EN",localStorage.setItem("language",r),$.innerHTML="EN",F.innerHTML="FEELS LIKE: ",C.innerHTML="WIND: ",N.innerHTML="m/s",U.innerHTML="HUMIDITY: ",o.value,S.innerHTML="SEARCH",D.innerHTML="Latitude:",R.innerHTML="Longitude:",O(i),q()),e()},j.onclick=function(){A()},k.onclick=function(n){if(this.classList.contains("active"))return!1;k.classList.add("active"),f.classList.remove("active"),localStorage.setItem("temp-status","celsium"),c.innerHTML=((+c.textContent-32)/1.8).toFixed(0),d.innerHTML=((+d.textContent-32)/1.8).toFixed(0),s.innerHTML=((+s.textContent-32)/1.8).toFixed(0),l.innerHTML=((+l.textContent-32)/1.8).toFixed(0),L.innerHTML=((+L.textContent-32)/1.8).toFixed(0),e()},f.onclick=function(n){if(this.classList.contains("active"))return!1;f.classList.add("active"),k.classList.remove("active"),localStorage.setItem("temp-status","farengeit"),c.innerHTML=(1.8*+c.textContent+32).toFixed(0),d.innerHTML=(1.8*+d.textContent+32).toFixed(0),s.innerHTML=(1.8*+s.textContent+32).toFixed(0),l.innerHTML=(1.8*+l.textContent+32).toFixed(0),L.innerHTML=(1.8*+L.textContent+32).toFixed(0),e()},document.onclick=function(e){if(event.target!=o&&""===o.value&&(o.value="EN"===r?"Search city or ZIP":"Искать город или почтовый индекс"),!h.classList.contains("open-error"))return 0;h.classList.remove("open-error")},document.getElementById("yourSearch").addEventListener("keydown",(function(e){13===e.keyCode&&A()})),null===localStorage.getItem("language")?(r="EN",localStorage.setItem("language",r),J(),q()):(r=localStorage.getItem("language"),J(),q()),setInterval(P,1e3)})();